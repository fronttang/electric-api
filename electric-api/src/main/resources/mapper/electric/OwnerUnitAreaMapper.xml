<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.rosenzest.electric.mapper.OwnerUnitAreaMapper">

	<select id="queryUnitAreaByType" resultType="com.rosenzest.electric.vo.OwnerUnitAreaVo">
		select a.id, a.unit_id, a.name, a.floor, a.type,
		(select count(1) from owner_unit_area_danger d where d.unit_area_id =a.id and d.unit_id = a.unit_id) as dangers 
		from owner_unit_area a where a.unit_id = #{unitId}
		<if test="type != null and type != ''">
			and a.type = #{type}
		</if>
	</select>

</mapper>
